// src/components/ChatWindow/MessageInput.less
//
/// 消息输入框样式 - 仿微信风格

@import url('../../styles/variables.less');
@import url('../../styles/mixins.less');

.message-input {
  display: flex;
  flex-direction: column;
  background-color: @bg-white;
  border-top: 1px solid @border-color;
  flex-shrink: 0;

  // 聚焦状态
  &.focused {
    .input-textarea-wrapper {
      border-color: @primary-color;
    }
  }
}

// ============================================================
// 工具栏
// ============================================================

.input-toolbar {
  display: flex;
  align-items: center;
  padding: @spacing-md @spacing-lg;
  border-bottom: 1px solid @border-light;

  .toolbar-btn {
    width: 32px;
    height: 32px;
    margin-right: @spacing-md;
    .flex-center();

    color: @text-secondary;
    background: none;
    border: none;
    border-radius: @border-radius-base;
    cursor: pointer;
    transition: @transition-fast;

    &:hover {
      background-color: @hover-bg;
      color: @text-primary;
    }

    &:last-child {
      margin-right: 0;
    }

    svg {
      width: 20px;
      height: 20px;
    }
  }
}

// ============================================================
// 输入框区域
// ============================================================

.input-textarea-wrapper {
  flex: 1;
  padding: @spacing-md @spacing-lg;
  border: 1px solid transparent;
  transition: @transition-fast;

  .input-textarea {
    width: 100%;
    min-height: 80px;
    max-height: 120px;
    border: none;
    outline: none;
    resize: none;
    font-size: @font-size-base;
    font-family: @font-family;
    line-height: @line-height-base;
    color: @text-primary;
    background: transparent;

    &::placeholder {
      color: @text-tertiary;
    }

    &::-webkit-scrollbar {
      width: 4px;
    }
  }
}

// ============================================================
// 底部操作栏
// ============================================================

.input-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: @spacing-md @spacing-lg @spacing-sm;
  border-top: 1px solid @border-light;

  .char-count {
    margin-right: @spacing-lg;
    font-size: @font-size-xs;
    color: @text-tertiary;

    &.warning {
      color: #FA5151;
    }
  }

  .send-btn {
    padding: @spacing-sm @spacing-xl;
    .btn-base(@sidebar-bg, @text-tertiary);

    cursor: not-allowed;
    font-size: @font-size-base;

    &.active {
      .btn-base(@primary-color, @text-white);

      cursor: pointer;
    }
  }
}

// ============================================================
// Emoji 选择器遮罩
// ============================================================

.emoji-picker-overlay {
  position: absolute;
  bottom: 100%;
  left: 0;
  right: 0;
  background-color: @bg-white;
  border: 1px solid @border-color;
  border-radius: @border-radius-base;
  box-shadow: @shadow-base;
  z-index: @z-dropdown;
  margin-bottom: @spacing-sm;
}

// ============================================================
// 文件上传对话框遮罩
// ============================================================

.file-upload-overlay {
  .overlay-base();
}

.file-upload-dialog {
  .modal-base();

  padding: @spacing-xxl;
}

// ============================================================
// 响应式
// ============================================================

@media (width <= 768px) {
  .input-actions {
    .send-btn {
      padding: @spacing-sm @spacing-lg;
    }
  }
}
